什么是hash 函数 简而言之 就是压缩数据的功能 它是数字加密的核心基础 hash function 就像 黑盒子 你放进去A 打开就会变成B  它有几个特点 第一 放多长多短的A， B 出来的结果是不同的C， D  而CD 是 固定长度 （比如256bits） 比他但是你没办法通过C， D 在有限的计算机时间内找到A， B 如何变成 C， D 的 这就是hash函数的单向性 隐蔽性，第二 你还是可以通过 不停的计算 尝试去攻破hash 函数 而这个努力的过程 最后也被看作工作量的体现（proof of work）。 接下来什么是merkle tree呢 实际上就是一种hash的结构 比如 现在有段数据 A， B， C，D 然后你分别 把 hash A+ B 得到 E 再 hash C+ D 得到F 最后把 E + F hash之后得到 G 因为之前说过的 单方向性 如果另一个人说他拥有和你一样的A， B ， C， D 他只需要证明 他 能拿出G 和你一样 就可以相信他说的话， 而如果 他 算不出G 那你们俩所拥有的数据是不同的。 也就是merkle tree 用在 验证数据的一致性有重要作用， 别人只需要给你一个数， 你通过判断 它是不是G 就知道他是不是拥有和你一样的数据（想一想蝴蝶效应）。 接下来 merkle tree 在 比特币 和以太坊中的作用有什么？ 首先 比特币中 一个块里面有拥有很多交易 而验证这些交易都在块中 不存在不一致 你只需要知道merkle tree的最后结果 就可以验证块与块是否一致 尤其有用的是作为手机客户端 可以不需要存储所有交易信息 储存一个merkle tree 的树顶就行了 但这也有局限性 比如你只存树顶 你就不能知道每个账户有多少钱 因为UTXO 我们也说过 每个账户没有状态 所以先有的轻钱包 想要查询 账户额度 需要去网络中发送请求。 而以太坊不一样 通过需要存储整个前一区块的状态树 可以本地就知道各个账户的所有信息。 以太坊的merkle tree 是一种变种 Merkle Patricia Tree （MPT）叫字典树（trie）这个树 拥有不一样的结构 顾名思义 字典 通过共享相同首字母的存储节省空间。 为了想查字典一样 面对相同的词 字典树会把所有相同的字母缩减 比如 abcd， abc， abce 实际上 在MPT中做了数据压缩， 两者的区别变成 “” 和 “d” “e”， “”的值 存在在 一个 17个空中的最后一个位置， 而 “d”的值 存在第四个位置 “e”存在在第5个位置，而merkle tree 的树顶也是最终所有结点的hash 结果 （这里保证了唯一性 之前说的 只要改变一个数据 都会引起巨大变化 ）然后 存在本地的数据库里面， 通过运算新的交易 算出新的MPT 也就是新的状态 完成状态转移。今天有点没完全懂MPT  感觉讲的有点乱 等放一下 我改天在 重新好好讲一下  链接 ： 链接：Patricia Tree · ethereum/wiki Wiki · GitHub
